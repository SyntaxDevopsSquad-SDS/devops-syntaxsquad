{{ define "content" }}
<div>
    <input id="search-input" placeholder="Search..." value="{{ .Query }}"/>
    <button id="search-button" onclick="makeSearchRequest()">Search</button>
</div>

<div id="results">
    {{ range .SearchResults }}
    <div>
        <h2><a class="search-result-title" href="{{ .URL }}">{{ .Title }}</a></h2>
        <p class="search-result-description">{{ .Content }}</p>
    </div>
    {{ end }}
</div>

<script>
    let searchInput;

    document.addEventListener('DOMContentLoaded', () => {
        searchInput = document.getElementById("search-input");
        searchInput.focus();

        searchInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                makeSearchRequest();
            }
        });
    });

    function makeSearchRequest() {
        const query = searchInput.value;
        const url = new URL(window.location.href);
        url.searchParams.set('q', query);
        window.location.href = url.toString();
    }
</script>
{{ end }}
